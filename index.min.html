<!DOCTYPE html><html lang="en"> <head> <meta charset="UTF-8"/> <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <style>body{margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh;}</style> <title>Document</title> </head> <body> <canvas id="canvas" width="1" height="1"></canvas> <script>document.addEventListener("keydown", keyDownHandler, false); document.addEventListener("keyup", keyUpHandler, false); const KEYS={up: 87,down: 83,right: 68,left: 65,shoot: 32,enter: 13,z: 90,escape: 27}; let levelBefore=door=response=0,level=1; let dialog=question=""; let showDialog=asked=password=room202=room401=room501=dog=screwdriver=money=false; const colors={"M": "grey", "D": "brown", "Q": "black", "W": "grey", "E": "darkgrey", "A": "DarkGoldenRod", "Y": "Yellow", "O": "orange", "G": "green", "T": "white", "B": "blue", "R": "red", '-': "transparent"}; const doors=[100,250,400,550,700]; var timer=-1; var keyRight=keyUp=keyDown=keyLeft=keyEnter=keyZ=keyEscape=false; let currentHint=0; let hints=[ "Knock my door anytime you need a hint..."]; let playerSprite=[ ["-", "-", "-", "-", "-", "-", "-"], ["-", "-", "-", "M", "M", "-", "-"], ["-", "-", "-", "M", "M", "-", "-"], ["-", "-", "-", "-", "-", "-", "-"], ["-", "-", "M", "M", "M", "-", "-"], ["-", "M", "-", "M", "-", "M", "-"], ["-", "M", "-", "M", "-", "M", "-"], ["M", "-", "-", "M", "-", "-", "M"], ["M", "-", "M", "M", "M", "-", "M"], ["-", "-", "M", "-", "M", "-", "-"], ["-", "-", "M", "-", "M", "-", "-"], ["-", "-", "M", "-", "M", "-", "-"], ["-", "-", "M", "-", "M", "-", "-"], ["-", "M", "M", "-", "M", "M", "-"], ["-", "-", "-", "-", "-", "-", "-"],]; let dogSprite=[ ['-', '-', '-', '-', '-', 'Q', 'Q', 'Q', 'Q', '-', '-', '-', '-', '-', '-', '-', '-'], ['-', '-', '-', '-', 'Q', 'D', 'D', 'D', 'D', 'Q', '-', '-', '-', '-', '-', '-', '-'], ['-', '-', '-', 'Q', 'D', 'D', 'D', 'D', 'D', 'D', 'Q', '-', '-', '-', '-', '-', '-'], ['-', 'Q', '-', 'Q', 'D', 'Q', 'D', 'D', 'D', 'D', 'Q', '-', '-', '-', '-', '-', '-'], ['Q', 'D', 'Q', 'D', 'D', 'Q', 'D', 'D', 'D', 'D', 'D', 'Q', '-', '-', '-', '-', '-'], ['-', 'Q', 'D', 'D', 'D', 'D', 'D', 'Q', 'D', 'D', 'D', 'Q', '-', '-', '-', '-', '-'], ['-', 'Q', 'D', 'D', 'D', 'D', 'D', 'Q', 'D', 'D', 'D', 'Q', '-', '-', '-', 'Q', '-'], ['-', '-', 'Q', 'Q', 'Q', 'Q', 'Q', 'R', 'Q', 'Q', 'Q', 'Q', '-', '-', 'Q', 'D', 'Q'], ['-', '-', '-', '-', '-', 'Q', 'R', 'Q', 'D', 'D', 'Q', '-', '-', 'Q', 'D', 'D', 'Q'], ['-', '-', '-', '-', '-', 'Q', 'Q', 'D', 'D', 'D', 'D', 'Q', 'Q', 'D', 'D', 'Q', '-'], ['-', '-', '-', '-', '-', 'Q', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'Q', '-', '-'], ['-', '-', '-', '-', '-', 'Q', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'Q', '-', '-', '-'], ['-', '-', '-', '-', '-', 'Q', 'D', 'D', 'D', 'D', 'D', 'D', 'D', 'Q', '-', '-', '-'], ['-', '-', '-', '-', 'Q', 'D', 'D', 'Q', 'Q', 'Q', 'Q', 'Q', 'D', 'D', 'Q', '-', '-'], ['-', '-', '-', 'Q', 'D', 'D', 'Q', '-', '-', '-', '-', '-', 'Q', 'D', 'D', 'Q', '-'], ['-', '-', '-', '-', 'Q', 'Q', '-', '-', '-', '-', '-', '-', '-', 'Q', 'Q', '-', '-'],]; let doorSprite=[ ["O", "O", "O", "O", "O", "O", "O", "O", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "O", "O", "O", "O", "O", "O", "O", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "O"], ["O", "O", "O", "O", "O", "O", "O", "O", "O"],]; let elevator=[["W", "E"]]; let airductSprite=[ ['E','E','E','E','E','E','E','E','E','E','E','E','E','E','E','E',], ['E','-','-','-','-','-','-','-','-','-','-','-','-','-','-','E',], ['E','-','E','-','-','-','-','-','-','-','-','-','-','E','-','E',], ['E','-','-','-','-','-','-','-','-','-','-','-','-','-','-','E',], ['E','-','-','E','E','E','E','E','E','E','E','E','E','-','-','E',], ['E','-','-','-','-','-','-','-','-','-','-','-','-','-','-','E',], ['E','-','-','E','E','E','E','E','E','E','E','E','E','-','-','E',], ['E','-','-','-','-','-','-','Y','-','-','-','-','-','-','-','E',], ['E','-','-','E','E','E','E','E','E','E','E','E','E','-','-','E',], ['E','-','-','-','-','-','-','Y','Y','-','-','-','-','-','-','E',], ['E','-','-','E','E','E','E','E','E','E','E','E','E','-','-','E',], ['E','-','-','-','-','-','-','-','-','-','-','-','-','-','-','E',], ['E','-','E','-','-','-','-','-','-','-','-','-','-','E','-','E',], ['E','-','-','-','-','-','-','-','-','-','-','-','-','-','-','E',], ['E','E','E','E','E','E','E','E','E','E','E','E','E','E','E','E',],]; let closet=[ ["D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D",], ["D", "A", "A", "A", "A", "A", "A", "A", "D", "A", "A", "A", "A", "A", "A", "A", "D",], ["D", "A", "A", "A", "A", "A", "A", "A", "D", "A", "A", "A", "A", "A", "A", "A", "D",], ["D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D",], ["D", "G", "A", "A", "A", "A", "A", "A", "D", "A", "A", "A", "A", "A", "A", "A", "D",], ["D", "G", "R", "Y", "A", "A", "A", "A", "D", "A", "A", "A", "A", "A", "A", "A", "D",], ["D", "G", "R", "Y", "A", "A", "A", "A", "D", "A", "A", "A", "A", "A", "G", "A", "D",], ["D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D",], ["D", "B", "B", "R", "G", "A", "A", "A", "D", "A", "A", "A", "A", "A", "A", "A", "D",], ["D", "B", "B", "R", "G", "A", "A", "A", "D", "A", "A", "A", "A", "A", "A", "A", "D",], ["D", "B", "B", "R", "G", "A", "A", "A", "D", "A", "A", "A", "A", "A", "A", "A", "D",], ["D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D",], ["D", "A", "A", "A", "A", "A", "A", "A", "D", "A", "A", "A", "A", "A", "A", "A", "D",], ["D", "A", "A", "A", "A", "A", "A", "A", "D", "A", "A", "A", "A", "A", "A", "A", "D",], ["D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D",],]; let desk=[ ["D", "-", "-", "-", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", '-', '-', "-", 'D'], ["D", "-", "-", "-", "-", "D", "D", "D", "D", "D", "D", "D", "D", "D", "D", "-", '-', '-', "-", 'D'], ["D", "-", "-", "-", "-", "D", "-", "-", "-", "-", "-", "-", "-", "-", "D", "-", '-', '-', "-", 'D'], ["D", "-", "-", "-", "-", "D", "-", "-", "-", "-", "-", "-", "-", "-", "D", "-", '-', '-', "-", 'D'], ["D", "D", "D", "D", "-", "D", "-", "-", "-", "-", "-", "-", "-", "-", "D", "-", 'D', 'D', "D", 'D'], ["D", "-", "-", "D", "-", "D", "-", "-", "-", "-", "-", "-", "-", "-", "D", "-", 'D', '-', "-", 'D'], ["D", "-", "-", "D", "-", "D", "-", "-", "-", "-", "-", "-", "-", "-", "D", "-", 'D', '-', "-", 'D'], ["D", "-", "-", "D", "-", "D", "-", "-", "-", "-", "-", "-", "-", "-", "D", "-", 'D', '-', "-", 'D'],]; let passwordSprite=[ ['T','T','T','T','T','T','T','T','T','T','T','T','T','T','T'], ['T','Q','Q','Q','T','Q','T','Q','T','Q','Q','Q','T','Q','T'], ['T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T'], ['T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T'], ['T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T'], ['T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T'], ['T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T'], ['T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T','Q','T'], ['T','Q','Q','Q','T','Q','T','Q','T','Q','Q','Q','T','Q','T'], ['T','T','T','T','T','T','T','T','T','T','T','T','T','T','T'],]; let moneySprite=[ ['T','T','T','T','T','T','T','T','T','T','T','T','T','T','T','T',], ['T','G','T','G','G','G','G','G','G','G','G','G','G','T','G','T',], ['T','T','G','G','G','G','T','T','T','T','G','G','G','G','T','T',], ['T','G','G','G','G','T','G','G','G','G','T','G','G','G','G','T',], ['T','G','T','T','G','T','G','T','T','G','T','G','T','T','G','T',], ['T','G','T','T','G','T','G','T','T','G','T','G','T','T','G','T',], ['T','G','G','G','G','T','G','G','G','G','T','G','G','G','G','T',], ['T','T','G','G','G','G','T','T','T','T','G','G','G','G','T','T',], ['T','G','T','G','G','G','G','G','G','G','G','G','G','T','G','T',], ['T','T','T','T','T','T','T','T','T','T','T','T','T','T','T','T',],]; let screwdriverSprite=[ ['-','-','-','-','-','-','-','-','-','-','-','-','-','R','R','R',], ['-','-','-','-','-','-','-','-','-','-','-','-','R','R','-','R',], ['-','-','-','-','-','-','-','-','-','-','-','R','R','-','R','R',], ['-','-','-','-','-','-','-','-','-','-','R','R','-','R','R','-',], ['-','-','-','-','-','-','-','-','-','R','R','-','R','R','-','-',], ['-','-','-','-','-','-','-','-','R','R','-','R','R','-','-','-',], ['-','-','-','-','-','-','-','R','R','-','R','R','-','-','-','-',], ['-','-','-','-','-','-','R','R','-','R','R','-','-','-','-','-',], ['-','-','-','-','-','R','R','-','R','R','-','-','-','-','-','-',], ['-','-','-','-','-','-','R','R','R','-','-','-','-','-','-','-',], ['-','-','-','-','-','W','-','R','-','-','-','-','-','-','-','-',], ['-','-','-','-','W','-','-','-','-','-','-','-','-','-','-','-',], ['-','-','-','W','-','-','-','-','-','-','-','-','-','-','-','-',], ['-','W','W','-','-','-','-','-','-','-','-','-','-','-','-','-',], ['W','W','W','-','-','-','-','-','-','-','-','-','-','-','-','-',], ['-','W','-','-','-','-','-','-','-','-','-','-','-','-','-','-',]]; const player={sprite: playerSprite, x: 0, y: 144, spriteIndexSize: 8, jumping: false, face: "right", color: 'white', speed: 2}; const canvas=document.getElementById("canvas"); const ctx=canvas.getContext("2d"); canvas.height=256; canvas.width=800; function draw(){ctx.fillStyle="black"; ctx.fillRect(0, 0, canvas.width, canvas.height); if (room202){drawText(dialog,20,32,20,"white"); drawSprite(closet,400,138,8,8); drawSprite(desk,200,194,8,8); drawSprite(doorSprite,123,138,8,8); drawSprite(doorSprite,560,138,8,8);}else if (room501){ctx.fillStyle="lightgrey"; ctx.fillRect(0, 0, canvas.width, canvas.height); drawText(dialog,20,32,20,'white'); drawSprite(doorSprite,100,138,8,8); drawSprite(airductSprite, 416, canvas.height - 30, 2,2);}else if (showDialog){ctx.fillStyle="white"; ctx.fillRect(canvas.width / 2 - 62,62, 125, 125); for(let i=1; i <=5; i++){if (level===i){ctx.fillStyle="blue"; ctx.fillRect(canvas.width / 2 - 62, 62 + (i - 1) * 25, 125, 25);}let cl=level !=i ? "black" : "white" drawText(i,canvas.width / 2 - ctx.measureText(i).width/2,80+25*(i-1),20,cl);}}else if (asked){drawText(dialog,20,32,20,"white"); ctx.fillStyle="white"; ctx.fillRect(canvas.width / 2 - 64, 64, 128, 128); ctx.fillStyle="blue"; let customHeight=!response ? 50 : 30; ctx.fillRect(canvas.width / 2 - 64, 64 + customHeight, 128, 22); drawText(question,canvas.width / 2 - ctx.measureText(question).width / 2,86,12,"black"); drawText('yes',canvas.width / 2 - ctx.measureText('yes').width / 2,108,20,response ? "white" : "black"); drawText('no',canvas.width / 2 - ctx.measureText('no').width / 2,130,20,response ? "black" : "white");}else{drawText(dialog,20,32,20,"white"); if (money) drawSprite(moneySprite, canvas.width - 64, 10, 2, 2); if (screwdriver) drawSprite(screwdriverSprite, canvas.width - 64, 10, 2, 2); if (password) drawSprite(passwordSprite, canvas.width - 64, 10, 2, 2); doors.forEach((x, i)=>{if (level===1 && i > 2){}else{drawText(`${level}0${i+1}`,x+19,120,20,"white")}if (level===4 && i===3){}else if (level===1 && i > 2){}else drawSprite(doorSprite,x,138,8,8)}) drawSprite(elevator, 0, 120, 8, 8);}drawSprite(player.sprite, player.x, player.y, player.spriteIndexSize, player.spriteIndexSize); if (dog) drawSprite(dogSprite, player.x - 64, player.y + 64, 3, 3);}function update(){if (showDialog){if (keyUp){keyUp=false level-- if (level < 1){level=5}}if (keyDown){keyDown=false level++ if (level > 5){level=1}}if (keyEnter || keyZ){keyEnter=keyZ=false showDialog=false}if (keyEscape){keyEscape=false level=levelBefore showDialog=false}}else if (asked){if (keyUp || keyDown){keyUp=false keyDown=false response=!response}if (keyEnter || keyZ){if (response){if (level==2){room202=true asked=false question=""}else if (level==4 && door==2){money=false password=true asked=false question=""}else if (level==4 && door==1){screwdriver=true password=false asked=false question=""}else if (level==5 && door==1){room501=true asked=false question=""}}else{asked=false question=""}}}else{if (dialog=="ELEVATOR" && keyUp){showDialog=true levelBefore=level keyUp=false}else if (dialog.split(" ")[0]=="Open" && keyUp){gameLogic() keyUp=false}else if (dialog.split(" ")[0]=="Take" && keyUp){closet[6][14]="A" money=true keyUp=false}else if (dialog=="Leave" && (room202 || room501) && keyUp){room202=false room501=false keyUp=false}else{if (keyRight){player.x +=player.speed;}if (keyLeft){player.x -=player.speed;}if (timer==-1){checkPlayerCollision()}}}}function checkPlayerCollision(){if (room202){if (player.x + 56 > 123 && player.x < 192){dialog="Leave"}else if (player.x + 56 > 560 && player.x < 632){dialog="I'm taking a shower, I leave in a minute"}else if (player.x + 56 > 500 && player.x < 572 && closet[6][14]==="G"){dialog="Take the money"}else{dialog=""}}else if (room501){if (player.x + 56 > 100 && player.x < 172){dialog="Leave"}else{dialog=""}}else{if (player.x + 56 > 100 && player.x < 172){door=1 dialog=`Open door ${level}0${door}`}else if (player.x + 56 > 250 && player.x < 322){door=2 dialog=`Open door ${level}0${door}`}else if (player.x + 56 > 400 && player.x < 472){door=3 dialog=`Open door ${level}0${door}`}else if (player.x + 56 > 550 && player.x < 622){door=4 dialog=`Open door ${level}0${door}`}else if (player.x + 56 > 700 && player.x < 722){door=5 dialog=`Open door ${level}0${door}`}else if (player.x <=24){dialog="ELEVATOR"}else{dialog="" timer=-1}}}function keyDownHandler(event){switch (event.keyCode){case KEYS.right: keyRight=true; break; case KEYS.left: if (player.x > 0){keyLeft=true;}break; case KEYS.up: keyUp=true; break; case KEYS.down: keyDown=true; break; case KEYS.z: keyZ=true; break; case KEYS.enter: keyEnter=true; break; case KEYS.escape: keyEscape=true; break;}}function keyUpHandler(event){switch (event.keyCode){case KEYS.right:keyRight=false;break; case KEYS.left:keyLeft=false;break; case KEYS.up:keyUp=false;break; case KEYS.down:keyDown=false;break; case KEYS.enter:keyEnter=false;break; case KEYS.z:keyZ=false;break; case KEYS.escape:keyEscape=false;break;}}function gameLogic(){if (level==1){if (door==1){dialog="Sorry I'm packing..."}else if (door==2){dialog="I can ask someone if you want to..."}else if (door==3){dialog=hints[currentHint]; currentHint++}}else if (level==2){if (door==1){dialog="Hello?... I'm new here"}else if (door==2){dialog="Come on in..."; asked=true; question="Enter the room?"}else if (door==3){dialog="I can't say anything"}else if (door==4){dialog="Nobody lives here"}else{dialog="Buy I new home "}}else if (level==3){if (door==1){dialog="This guy moved out..."}else if (door==2){dialog="Come back latter"}else if (door==3){dialog="Maybe someone else can help you..."}else if (door==4){dialog="I didn't see anything diferent"}else{dialog="Maybe you need a secure "}}else if (level==4){if (door==1){dialog=`What it's the password?...${password ? 'come on in...' : '...no'}`; asked=password; question='Enter the room?'}else if (door==2){dialog="How much can you pay?"; asked=money; question='Give money?'}else if (door==3){dialog="I can't talk to you"}else if (door==4){dialog="Where is my door?"}else{dialog="Sorry, I can't open the door"}}else{if (door==1){dialog="This is the janitor Room"; asked=true; question="Enter the room?"}else if (door==2){dialog="Maybe the room 505 could help you"}else if (door==3){dialog="ZZZZzzzZZZZzzZZ"}else if (door==4){dialog="..."}else{dialog="אני לא מדבר אנגלית"}}timerStart()}const timerStart=(time=2*60)=> timer=time; function drawSprite(sprite, x, y, w, h){sprite.forEach((r, rI)=>{r.forEach((c, cI)=>{ctx.fillStyle=colors[c]; ctx.fillRect(x + cI * w, y + rI * h, w, h);});});}function drawText(t,x,y,s,c){ctx.font=`${s}px Georgia`; ctx.fillStyle=c ctx.fillText(t, x, y);}setInterval(function (){if (timer > -1){timer--; if (timer==-1) timeOut()}update(); draw();}, 1000 / 60); </script> </body></html>